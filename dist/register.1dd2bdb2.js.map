{"mappings":"AAAO,MAAMA,EAAe,CAC1BC,KAAM,UACNC,KAAM,gBCFKC,EAAoB,CAACC,EAAKC,IAAUC,aAAaC,QAAQH,EAAKI,KAAKC,UAAUJ,IAC7EK,EAAoBN,GAAQI,KAAKG,MAAML,aAAaM,QAAQR,ICGlE,MAAMS,EAAgBC,IAAa,OAAAX,EAAkBH,EAAaE,KCO/B,CACxCa,IAD8BC,EDP+DF,GCQpFC,GACTE,SAAUD,EAAKC,SACfC,MAAOF,EAAKE,QAHiB,IAACF,CDPyE,EAC5FG,EAAe,IAAMT,EAAiBV,EAAaE,MELhE,MAEakB,EAAW,CACtBC,SAAU,uDACVC,MAAO,oDACPC,MAAO,oDACPC,KAAM,oD,ICgBRC,EAAe,C,IAtBIC,MAAOC,GAAKC,QAAEA,EAAU,IAAO,MAChD,MAAMC,EAAiB,CACrBC,OAAQ,M,QACRF,GAEIG,QAAaC,MAAML,EAAKE,GAC9B,aAAaE,EAAKE,MAAM,E,KAGNP,MAAOC,GAAKO,KAAEA,EAAIN,QAAEA,EAAU,IAAO,MACvD,MAAMC,EAAiB,CACrBC,OAAQ,OACRF,QAAQ,CACN,eAAgB,sBACbA,GAELM,KAAM1B,KAAKC,UAAUyB,IAEjBH,QAAaC,MAAML,EAAKE,GAC9B,aAAaE,EAAKE,MAAM,GChBnB,MASME,EAAe,EAACJ,KAAEA,KAAWN,EAAMW,KAAK,GAAGhB,EAASE,QAAS,CACxEY,KAAMH,IACLM,OAAMC,IAAS,MAAMA,CAAG,ICdpB,MAAMC,EAAoBC,IAE/B,IADgBA,EAAYC,gBAG1B,MADAD,EAAYE,UAAUC,IAAI,iBACpB,IAAIC,MAAM,qBAGlB,OADAJ,EAAYE,UAAUG,OAAO,iBACtBC,OAAOC,YAAY,IAAIC,SAASR,GAAa,ECPhDS,EAAeC,SAASC,eAAe,qBACvCC,EAAgBF,SAASC,eAAe,sBAEjCE,EAAkBC,IAC7BL,EAAaP,UAAUC,IAAI,UAC3BS,EAAcV,UAAUG,OAAO,SAAS,EAE7BU,EAAaC,IACxBC,QAAQC,IAAIF,GACZP,EAAaP,UAAUG,OAAO,SAAS,EAE5Bc,EAAa,IAAMP,EAAcV,UAAUC,IAAI,UCP5D,MAAMiB,EAAcV,SAASC,eAAe,cAG7BhC,MACH0C,SAASC,KAAO,eAyB5BF,EAAYG,iBAAiB,UAtBNrC,MAAOsC,IAC5B,IACEA,EAAEC,iBAEFZ,IAEA,MAAMtB,EAAOQ,EAAiByB,EAAEE,QAE1BpD,QAAiBqB,EAAa,C,KAAEJ,IAEtClB,EAAaC,GAEb+C,SAASC,KAAO,a,CAChB,MAAOxB,GACPiB,EAAUjB,E,CACX,QAECqB,G","sources":["src/JS/constants/storage-keys.js","src/JS/utils/local-storage.js","src/JS/services/local-user.js","src/JS/models/local-user.js","src/JS/constants/endpoints.js","src/JS/utils/fetch.js","src/JS/services/users.js","src/JS/handlers/handle-submit-form.js","src/JS/handlers/handle-notify-form.js","src/JS/pages/register.js"],"sourcesContent":["export const STORAGE_KEYS = {\r\n  CART: 'sh_cart',\r\n  USER: 'current_user',\r\n};","export const writeLocalStorage = (key, value) => localStorage.setItem(key, JSON.stringify(value));\r\nexport const readLocalStorage = (key) => JSON.parse(localStorage.getItem(key));\r\nexport const removeLocalStorage = (key) => localStorage.removeItem(key);\r\nexport const clearLocalStorage = () => localStorage.clear();\r\n\r\n\r\nexport default {\r\n  write: writeLocalStorage,\r\n  read: readLocalStorage,\r\n  remove: removeLocalStorage,\r\n  clear: clearLocalStorage\r\n}","import { STORAGE_KEYS } from '../constants/storage-keys.js'\r\nimport { createLocalUser } from '../models/local-user.js'\r\nimport { writeLocalStorage, readLocalStorage, removeLocalStorage } from '../utils/local-storage.js'\r\n\r\nexport const setLocalUser = (userData) => writeLocalStorage(STORAGE_KEYS.USER, createLocalUser(userData))\r\nexport const getLocalUser = () => readLocalStorage(STORAGE_KEYS.USER)\r\nexport const removeLocalUser = () => removeLocalStorage(STORAGE_KEYS.USER)\r\n\r\nexport default {\r\n  get: getLocalUser,\r\n  set: setLocalUser,\r\n  remove: removeLocalUser\r\n}","/**\r\n * \r\n * @param {{\r\n * id: number,\r\n * name: string,\r\n * email: number,\r\n * : string,\r\n * description: string\r\n * }} product \r\n * @returns \r\n */\r\nexport const createLocalUser = (user) => ({\r\n  id: user.id,\r\n  username: user.username,\r\n  email: user.email\r\n})","const BASE_URL = 'https://mockend.com/alaanescobedo/db-server'\r\n\r\nexport const ENDPOINT = {\r\n  PRODUCTS: `${BASE_URL}/products`,\r\n  USERS: `${BASE_URL}/users`,\r\n  EMAIL: `${BASE_URL}/email`,\r\n  AUTH: `${BASE_URL}/auth`,\r\n}","export const get = async (url, { headers = {} } = {}) => {\r\n  const requestOptions = {\r\n    method: \"GET\",\r\n    headers\r\n  }\r\n  const data = await fetch(url, requestOptions)\r\n  return await data.json()\r\n}\r\n\r\nexport const post = async (url, { body, headers = {} } = {}) => {\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers:{\r\n      \"Content-Type\": \"application/json\",\r\n      ...headers\r\n    },\r\n    body: JSON.stringify(body)\r\n  }\r\n  const data = await fetch(url, requestOptions)\r\n  return await data.json()\r\n}\r\n\r\nexport default {\r\n  get,\r\n  post\r\n}","import { ENDPOINT } from '../constants/index.js'\r\nimport fetch from '../utils/fetch.js'\r\n\r\nexport const mockLoginUser = (_data) => fetch.get(`${ENDPOINT.USERS}/1`)\r\n\r\nexport const getUserById = (id) => fetch.get(`${ENDPOINT.USERS}/${id}`)\r\n  .catch(err => { throw err })\r\n\r\nexport const loginUser = ({ data }) => fetch.post(`${ENDPOINT.USERS}/login`, {\r\n  body: data\r\n})\r\n\r\nexport const registerUser = ({ data }) => fetch.post(`${ENDPOINT.USERS}`, {\r\n  body: data\r\n}).catch(err => { throw err })\r\n\r\nexport default {\r\n  register: registerUser,\r\n  getById: getUserById,\r\n  login: loginUser\r\n}","export const handleSubmitForm = (currentForm) => {\r\n  const isValid = currentForm.checkValidity();\r\n  if (!isValid)  {\r\n    currentForm.classList.add('was-validated');\r\n    throw new Error('Form is not valid');\r\n  }\r\n  currentForm.classList.remove('was-validated');\r\n  return Object.fromEntries(new FormData(currentForm));\r\n}","const errorElement = document.getElementById(\"notify-form-error\");\r\nconst loaderElement = document.getElementById(\"notify-form-loader\");\r\n\r\nexport const initNotifyForm = (message) => {\r\n  errorElement.classList.add(\"d-none\");\r\n  loaderElement.classList.remove(\"d-none\");\r\n}\r\nexport const showError = (error) => {\r\n  console.log(error); // Para desarrollo\r\n  errorElement.classList.remove(\"d-none\");\r\n}\r\nexport const hideLoader = () => loaderElement.classList.add(\"d-none\");\r\n\r\nexport default {\r\n  init: initNotifyForm,\r\n  shoError: showError,\r\n  hideLoader: hideLoader\r\n}","import { setLocalUser, getLocalUser } from \"../services/local-user.js\";\r\nimport { registerUser } from \"../services/users.js\";\r\nimport { handleSubmitForm, showError, hideLoader, initNotifyForm } from \"../handlers/index.js\";\r\n\r\nconst formElement = document.getElementById(\"login-form\");\r\n\r\nconst verifyIfLogged = () => {\r\n  const user = getLocalUser();\r\n  if (user) location.href = \"/index.html\";\r\n}\r\n\r\nconst submitRegister = async (e) => {\r\n  try {\r\n    e.preventDefault();\r\n    // Ocultar Error y Mostrar Loader\r\n    initNotifyForm()\r\n    // Validar Formulario y Obtener Datos\r\n    const data = handleSubmitForm(e.target);\r\n    // Enviar Datos al Servidor\r\n    const userData = await registerUser({ data });\r\n    // Guardar Usuario en LocalStorage\r\n    setLocalUser(userData);\r\n    // Redireccionar a la Pagina de Inicio\r\n    location.href = \"/index.html\";\r\n  } catch (err) {\r\n    showError(err)\r\n  }\r\n  finally {\r\n    hideLoader()\r\n  }\r\n}\r\n\r\nverifyIfLogged();\r\nformElement.addEventListener('submit', submitRegister);"],"names":["$0ec067545be38028$export$5aae9b6b3e0e7094","CART","USER","$b26e1a5bc50f117f$export$b45be5401fe45d66","key","value","localStorage","setItem","JSON","stringify","$b26e1a5bc50f117f$export$7ef555391b90c662","parse","getItem","$e64ab21a70f0be88$export$89120c59eb984db","userData","id","user","username","email","$e64ab21a70f0be88$export$ed226604b993fc00","$d9480a6a71d91a9a$export$1a23c4610ef05bed","PRODUCTS","USERS","EMAIL","AUTH","$46a2567f4e15aef8$export$2e2bcd8739ae039","async","url","headers","requestOptions","method","data","fetch","json","body","$4785773422613fc3$export$16015adca85344a","post","catch","err","$e8bc2628fce55b75$export$600e63a981acbb9","currentForm","checkValidity","classList","add","Error","remove","Object","fromEntries","FormData","$b1567d3d4dd812e5$var$errorElement","document","getElementById","$b1567d3d4dd812e5$var$loaderElement","$b1567d3d4dd812e5$export$81e8e5c3967a0617","message","$b1567d3d4dd812e5$export$3879b24e8245693d","error","console","log","$b1567d3d4dd812e5$export$5cee2c2772922923","$2bae6f41c1d92b0b$var$formElement","location","href","addEventListener","e","preventDefault","target"],"version":3,"file":"register.1dd2bdb2.js.map"}