{"mappings":"imBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,8JCAlD,MAAMC,EAAe,CAC1BC,KAAM,UACNC,KAAM,gBCFKC,EAAoB,CAACC,EAAKC,IAAUC,aAAaC,QAAQH,EAAKN,KAAKU,UAAUH,IAC7EI,EAAoBL,GAAQN,KAAKC,MAAMO,aAAaI,QAAQN,ICGlE,MAAMO,EAAgBC,IAAa,OAAAT,EAAkBH,EAAaE,KCO/B,CACxCT,IAD8BoB,EDP+DD,GCQpFnB,GACTqB,SAAUD,EAAKC,SACfC,MAAOF,EAAKE,QAHiB,IAACF,CDPyE,EAC5FG,EAAe,IAAMP,EAAiBT,EAAaE,MELhE,MAEae,EAAW,CACtBC,SAAU,uDACVC,MAAO,oDACPC,MAAO,oDACPC,KAAM,oD,MCNRC,EAAiB,IAAAC,IAAoB3B,EAAA,SAAA4B,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoB3B,EAAA,SAAA4B,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WCwCpF,IAAAL,IAAAD,GAKA,IAAAC,IAAAM,G,ICvBRC,EAAe,C,IAtBIC,MAAOJ,GAAKK,QAAEA,EAAU,IAAO,MAChD,MAAMC,EAAiB,CACrBC,OAAQ,M,QACRF,GAEIG,QAAaC,MAAMT,EAAKM,GAC9B,aAAaE,EAAKE,MAAM,E,KAGNN,MAAOJ,GAAKW,KAAEA,EAAIN,QAAEA,EAAU,IAAO,MACvD,MAAMC,EAAiB,CACrBC,OAAQ,OACRF,QAAQ,CACN,eAAgB,sBACbA,GAELM,KAAMxC,KAAKU,UAAU8B,IAEjBH,QAAaC,MAAMT,EAAKM,GAC9B,aAAaE,EAAKE,MAAM,GChBnB,MASME,EAAe,EAACJ,KAAEA,KAAWL,EAAMU,KAAK,GAAGvB,EAASE,QAAS,CACxEmB,KAAMH,IACLM,OAAMC,IAAS,MAAMA,CAAG,ICdpB,MAAMC,EAAoBC,IAE/B,IADgBA,EAAYC,gBAG1B,MADAD,EAAYE,UAAUC,IAAI,iBACpB,IAAIpD,MAAM,qBAGlB,OADAiD,EAAYE,UAAUE,OAAO,iBACtB1D,OAAO2D,YAAY,IAAIC,SAASN,GAAa,ECPhDO,EAAeC,SAASC,eAAe,qBACvCC,EAAgBF,SAASC,eAAe,sBAEjCE,EAAkBC,IAC7BL,EAAaL,UAAUC,IAAI,UAC3BO,EAAcR,UAAUE,OAAO,SAAS,EAE7BS,EAAaC,IACxBC,QAAQC,IAAIF,GACZP,EAAaL,UAAUE,OAAO,SAAS,EAE5Ba,EAAa,IAAMP,EAAcR,UAAUC,IAAI,UCP5D,MAAMe,EAAcV,SAASC,eAAe,cAG7BrC,MACH+C,SAASC,KAAO,eAyB5BF,EAAYG,iBAAiB,UAtBNlC,MAAOmC,IAC5B,IACEA,EAAEC,iBAEFZ,IAEA,MAAMpB,EAAOQ,EAAiBuB,EAAEE,QAE1BxD,QAAiB2B,EAAa,C,KAAEJ,IAEtCxB,EAAaC,GAEbmD,SAASC,KAAO,a,CAChB,MAAOtB,GACPe,EAAUf,E,CACX,QAECmB,G","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-055082af6fefb2c0.js","src/JS/constants/storage-keys.js","src/JS/utils/local-storage.js","src/JS/services/local-user.js","src/JS/models/local-user.js","src/JS/constants/endpoints.js","node_modules/@parcel/runtime-js/lib/runtime-f0eb044e510df69d.js","node_modules/@parcel/runtime-js/lib/runtime-a88f04c55418778f.js","src/JS/constants/navbar-data.js","src/JS/utils/fetch.js","src/JS/services/users.js","src/JS/handlers/handle-submit-form.js","src/JS/handlers/handle-notify-form.js","src/JS/pages/register.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bi4EE\\\":\\\"register.3133ce91.js\\\",\\\"4GD23\\\":\\\"cart-fill.87e67c8f.svg\\\",\\\"cYON9\\\":\\\"person-circle.acf5b5fa.svg\\\"}\"));","export const STORAGE_KEYS = {\r\n  CART: 'sh_cart',\r\n  USER: 'current_user',\r\n};","export const writeLocalStorage = (key, value) => localStorage.setItem(key, JSON.stringify(value));\r\nexport const readLocalStorage = (key) => JSON.parse(localStorage.getItem(key));\r\nexport const removeLocalStorage = (key) => localStorage.removeItem(key);\r\nexport const clearLocalStorage = () => localStorage.clear();\r\n\r\n\r\nexport default {\r\n  write: writeLocalStorage,\r\n  read: readLocalStorage,\r\n  remove: removeLocalStorage,\r\n  clear: clearLocalStorage\r\n}","import { STORAGE_KEYS } from '../constants/storage-keys.js'\r\nimport { createLocalUser } from '../models/local-user.js'\r\nimport { writeLocalStorage, readLocalStorage, removeLocalStorage } from '../utils/local-storage.js'\r\n\r\nexport const setLocalUser = (userData) => writeLocalStorage(STORAGE_KEYS.USER, createLocalUser(userData))\r\nexport const getLocalUser = () => readLocalStorage(STORAGE_KEYS.USER)\r\nexport const removeLocalUser = () => removeLocalStorage(STORAGE_KEYS.USER)\r\n\r\nexport default {\r\n  get: getLocalUser,\r\n  set: setLocalUser,\r\n  remove: removeLocalUser\r\n}","/**\r\n * \r\n * @param {{\r\n * id: number,\r\n * name: string,\r\n * email: number,\r\n * : string,\r\n * description: string\r\n * }} product \r\n * @returns \r\n */\r\nexport const createLocalUser = (user) => ({\r\n  id: user.id,\r\n  username: user.username,\r\n  email: user.email\r\n})","const BASE_URL = 'https://mockend.com/alaanescobedo/db-server'\r\n\r\nexport const ENDPOINT = {\r\n  PRODUCTS: `${BASE_URL}/products`,\r\n  USERS: `${BASE_URL}/users`,\r\n  EMAIL: `${BASE_URL}/email`,\r\n  AUTH: `${BASE_URL}/auth`,\r\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4GD23\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cYON9\")).toString();","export const navLinks = [\r\n  {\r\n    href: '/',\r\n    label: 'Home',\r\n    style: 'home'\r\n  },\r\n  {\r\n    href: '/editor.html',\r\n    label: 'Personaliza',\r\n    style: 'editor'\r\n  },\r\n  {\r\n    href: '/productos.html',\r\n    label: 'Productos',\r\n    style: 'productos'\r\n  },\r\n  {\r\n    href: '/contactanos.html',\r\n    label: 'Contactanos',\r\n    style: 'contactanos'\r\n  },\r\n  {\r\n    href: '/about-us.html',\r\n    label: 'Nosotros',\r\n    style: 'about-us'\r\n  },\r\n  {\r\n    href: '/login.html',\r\n    label: 'Login',\r\n    style: 'login'\r\n  },\r\n  {\r\n    href: '/producto-info.html',\r\n    style: 'producto'\r\n  },\r\n]\r\nexport const excludeLinks = ['/login.html', '/register.html', '/index.html', '/producto-info.html', '/editor.html']\r\nexport const pathIcons = {\r\n  cart: {\r\n    label: 'Carrito',\r\n    path: new URL('/public/assets/icons/cart-fill.svg', import.meta.url),\r\n    url: '#'\r\n  },\r\n  profile: {\r\n    label: 'Usuario',\r\n    path: new URL('/public/assets/icons/person-circle.svg', import.meta.url),\r\n    list: {\r\n      offline: [\r\n        `<li><a class=\"dropdown-item\" href=\"/login.html\">Iniciar sesión</a></li>`,\r\n        `<li><a class=\"dropdown-item\" href=\"/register.html\">Registrate</a></li>`\r\n      ],\r\n      online: [\r\n        `<li><button class=\"btn dropdown-item\" id=\"btn-logout\">Cerrar sesión</button></li>`,\r\n      ]\r\n\r\n    }\r\n  },\r\n}\r\n","export const get = async (url, { headers = {} } = {}) => {\r\n  const requestOptions = {\r\n    method: \"GET\",\r\n    headers\r\n  }\r\n  const data = await fetch(url, requestOptions)\r\n  return await data.json()\r\n}\r\n\r\nexport const post = async (url, { body, headers = {} } = {}) => {\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers:{\r\n      \"Content-Type\": \"application/json\",\r\n      ...headers\r\n    },\r\n    body: JSON.stringify(body)\r\n  }\r\n  const data = await fetch(url, requestOptions)\r\n  return await data.json()\r\n}\r\n\r\nexport default {\r\n  get,\r\n  post\r\n}","import { ENDPOINT } from '../constants/index.js'\r\nimport fetch from '../utils/fetch.js'\r\n\r\nexport const mockLoginUser = (_data) => fetch.get(`${ENDPOINT.USERS}/1`)\r\n\r\nexport const getUserById = (id) => fetch.get(`${ENDPOINT.USERS}/${id}`)\r\n  .catch(err => { throw err })\r\n\r\nexport const loginUser = ({ data }) => fetch.post(`${ENDPOINT.USERS}/login`, {\r\n  body: data\r\n})\r\n\r\nexport const registerUser = ({ data }) => fetch.post(`${ENDPOINT.USERS}`, {\r\n  body: data\r\n}).catch(err => { throw err })\r\n\r\nexport default {\r\n  register: registerUser,\r\n  getById: getUserById,\r\n  login: loginUser\r\n}","export const handleSubmitForm = (currentForm) => {\r\n  const isValid = currentForm.checkValidity();\r\n  if (!isValid)  {\r\n    currentForm.classList.add('was-validated');\r\n    throw new Error('Form is not valid');\r\n  }\r\n  currentForm.classList.remove('was-validated');\r\n  return Object.fromEntries(new FormData(currentForm));\r\n}","const errorElement = document.getElementById(\"notify-form-error\");\r\nconst loaderElement = document.getElementById(\"notify-form-loader\");\r\n\r\nexport const initNotifyForm = (message) => {\r\n  errorElement.classList.add(\"d-none\");\r\n  loaderElement.classList.remove(\"d-none\");\r\n}\r\nexport const showError = (error) => {\r\n  console.log(error); // Para desarrollo\r\n  errorElement.classList.remove(\"d-none\");\r\n}\r\nexport const hideLoader = () => loaderElement.classList.add(\"d-none\");\r\n\r\nexport default {\r\n  init: initNotifyForm,\r\n  shoError: showError,\r\n  hideLoader: hideLoader\r\n}","import { setLocalUser, getLocalUser } from \"../services/local-user.js\";\r\nimport { registerUser } from \"../services/users.js\";\r\nimport { handleSubmitForm, showError, hideLoader, initNotifyForm } from \"../handlers/index.js\";\r\n\r\nconst formElement = document.getElementById(\"login-form\");\r\n\r\nconst verifyIfLogged = () => {\r\n  const user = getLocalUser();\r\n  if (user) location.href = \"/index.html\";\r\n}\r\n\r\nconst submitRegister = async (e) => {\r\n  try {\r\n    e.preventDefault();\r\n    // Ocultar Error y Mostrar Loader\r\n    initNotifyForm()\r\n    // Validar Formulario y Obtener Datos\r\n    const data = handleSubmitForm(e.target);\r\n    // Enviar Datos al Servidor\r\n    const userData = await registerUser({ data });\r\n    // Guardar Usuario en LocalStorage\r\n    setLocalUser(userData);\r\n    // Redireccionar a la Pagina de Inicio\r\n    location.href = \"/index.html\";\r\n  } catch (err) {\r\n    showError(err)\r\n  }\r\n  finally {\r\n    hideLoader()\r\n  }\r\n}\r\n\r\nverifyIfLogged();\r\nformElement.addEventListener('submit', submitRegister);"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$0ec067545be38028$export$5aae9b6b3e0e7094","CART","USER","$b26e1a5bc50f117f$export$b45be5401fe45d66","key","value","localStorage","setItem","stringify","$b26e1a5bc50f117f$export$7ef555391b90c662","getItem","$e64ab21a70f0be88$export$89120c59eb984db","userData","user","username","email","$e64ab21a70f0be88$export$ed226604b993fc00","$d9480a6a71d91a9a$export$1a23c4610ef05bed","PRODUCTS","USERS","EMAIL","AUTH","$16c0cf935aa46f89$exports","URL","resolve","import","meta","url","toString","$80ff6fce92cfb215$exports","$46a2567f4e15aef8$export$2e2bcd8739ae039","async","headers","requestOptions","method","data","fetch","json","body","$4785773422613fc3$export$16015adca85344a","post","catch","err","$e8bc2628fce55b75$export$600e63a981acbb9","currentForm","checkValidity","classList","add","remove","fromEntries","FormData","$b1567d3d4dd812e5$var$errorElement","document","getElementById","$b1567d3d4dd812e5$var$loaderElement","$b1567d3d4dd812e5$export$81e8e5c3967a0617","message","$b1567d3d4dd812e5$export$3879b24e8245693d","error","console","log","$b1567d3d4dd812e5$export$5cee2c2772922923","$2bae6f41c1d92b0b$var$formElement","location","href","addEventListener","e","preventDefault","target"],"version":3,"file":"register.3133ce91.js.map"}